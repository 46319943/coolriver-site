{"version":3,"sources":["webpack:///webpack/bootstrap 913df5ab60ad708ed617","webpack:///external \"path\"","webpack:///./server/db/index.js","webpack:///external \"fs\"","webpack:///./server/models/index.js","webpack:///./server/db/libs/init.js","webpack:///external \"lowdb\"","webpack:///external \"lowdb/adapters/FileSync\"","webpack:///./server/models/article.js","webpack:///external \"shortid\"","webpack:///./server/server.js","webpack:///external \"koa\"","webpack:///external \"koa-sslify\"","webpack:///external \"http\"","webpack:///external \"https\"","webpack:///external \"nuxt\"","webpack:///./server/router/router.js","webpack:///external \"koa-router\"","webpack:///./server/controllers/article.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///external \"regenerator-runtime\"","webpack:///./server/libs/cors.js","webpack:///external \"koa2-cors\"","webpack:///./nuxt.config.js","webpack:///./server/syncArticleData.js","webpack:///external \"walk\"","webpack:///./server/libs/mdParser.js","webpack:///./server/entry.js"],"names":["low","require","FileSync","path","dbDataPath","resolve","__dirname","adapter","DB","defaults","posts","users","write","articleModel","get","insertOrUpdate","title","time","img","desc","tags","name","data","articleFind","find","value","push","Object","assign","id","shortid","generate","getList","filter","app","host","process","env","HOST","port","PORT","config","dev","console","log","use","enforceHttps","nuxt","builder","build","catch","error","e","exit","setupCors","setupRouter","ctx","status","Promise","reject","res","on","render","req","promise","then","http","createServer","callback","listen","https","key","fs","readFileSync","cert","router","routes","next","query","limit","Number","MAX_SAFE_INTEGER","offset","tag","parseInt","list","sort","a","b","slice","item","indexOf","body","article","articles","map","reduce","result","cur","concat","tagsUniq","Array","from","Set","getTags","whiteDomain","cors","origin","hostname","module","exports","head","meta","charset","content","hid","itemprop","link","rel","type","href","script","src","async","extend","imageLoaderConf","rules","test","toString","vueLoader","rule","loader","options","loaders","sass","css","plugins","ssr","vendor","mdDir","walkMd","walker","walk","root","fileStats","birthtime","fileNamePur","replace","filePath","readFile","err","parseTags","parseDesc","parseImage","parseTitle","TAG_REG","matches","match","tagsStr","split","trim","DESC_REG","IMG_REG","TITLE_REG","BACKPACK_ENTRY_MAP","server","runEntryCommand","BACKPACK_ENTRY","entry","task"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 26);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 913df5ab60ad708ed617","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 0\n// module chunks = 0 1 2","import DB from './libs/init';\n\nexport { DB };\n\n\n\n// WEBPACK FOOTER //\n// ./server/db/index.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 2\n// module chunks = 0 1 2","import  * as articleModel from './article';\n\nexport { articleModel };\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/index.js","const low = require('lowdb');\r\nconst FileSync = require('lowdb/adapters/FileSync');\r\nconst path = require('path');\r\nconst dbDataPath = path.resolve(__dirname, '../data.json');\r\nconst adapter = new FileSync(dbDataPath);\r\nconst DB = low(adapter);\r\n\r\n// Set some defaults\r\nDB.defaults({ posts: [], users: [] })\r\n  .write();\r\n\r\nexport default DB;\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/db/libs/init.js","module.exports = require(\"lowdb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lowdb\"\n// module id = 5\n// module chunks = 0 1 2","module.exports = require(\"lowdb/adapters/FileSync\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lowdb/adapters/FileSync\"\n// module id = 6\n// module chunks = 0 1 2","import { DB } from '../db/index';\nimport shortid from 'shortid';\n\nconst articleModel = DB.get('articles');\n\n// 添加或者更新（如果文章name已经存在的话）一个文章信息\nexport function insertOrUpdate({ title, time, img, desc, tags, name }) {\n  const data = {\n    title,\n    img,\n    desc,\n    tags,\n    name\n  };\n  const articleFind = find({ name });\n\n  if (!articleFind.value()) {\n    // 新增article时，需要传入id和创建时间\n    articleModel.push(Object.assign({}, data, {\n      id: shortid.generate(),\n      time: +time,\n    })).write();\n  } else {\n    articleFind.assign(data).write();\n  }\n};\n\n// 根据条件返回文章列表\nexport function getList (filter = {}) {\n  return articleModel.filter(filter);\n};\n\n// 根据条件返回一个文章信息\nexport function find (filter = {}) {\n  return articleModel.find(filter);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/article.js","module.exports = require(\"shortid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"shortid\"\n// module id = 8\n// module chunks = 0 1 2","\nimport Koa from 'koa';\nimport enforceHttps from'koa-sslify';\nimport http from 'http';\nimport https from 'https';\nimport path from 'path';\nimport fs from 'fs';\nimport { Nuxt, Builder } from 'nuxt';\nimport { DB } from './db/index';\nimport setupRouter from './router/router';\nimport setupCors from './libs/cors';\n\nconst app = new Koa();\nconst host = process.env.HOST || '127.0.0.1';\nlet port = process.env.PORT || 80;\n\n// Import and Set Nuxt.js options\nlet config = require('../nuxt.config.js');\nconfig.dev = !(app.env === 'production');\n\n// 正式环境下启用https\nif (!config.dev) {\n  console.log('enable https');\n  app.use(enforceHttps());\n  port = 80;\n}\n\n// Instantiate nuxt.js\nconst nuxt = new Nuxt(config);\n\n// Build in development\nif (config.dev) {\n  const builder = new Builder(nuxt);\n  builder.build().catch(e => {\n    console.error(e); // eslint-disable-line no-console\n    process.exit(1);\n  });\n}\n\nsetupCors(app);\nsetupRouter(app);\n\napp.use(ctx => {\n  ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n\n  return new Promise((resolve, reject) => {\n    ctx.res.on('close', resolve)\n    ctx.res.on('finish', resolve)\n    nuxt.render(ctx.req, ctx.res, promise => {\n      // nuxt.render passes a rejected promise into callback on error.\n      promise.then(resolve).catch(reject)\n    })\n  })\n})\n\n// app.listen(port, '0.0.0.0');\nhttp.createServer(app.callback()).listen(port);\n\nif (!config.dev) {\n  https.createServer({\n    key: fs.readFileSync(path.resolve(__dirname, './ssl/2_coolriver.net.cn.key')),\n    cert: fs.readFileSync(path.resolve(__dirname, './ssl/1_coolriver.net.cn_bundle.crt')),\n  }, app.callback()).listen(443);\n}\n\nconsole.log('Server listening on a ' + host + ':' + port); // eslint-disable-line no-console\n\n\n\n// WEBPACK FOOTER //\n// ./server/server.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 10\n// module chunks = 0 1","module.exports = require(\"koa-sslify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-sslify\"\n// module id = 11\n// module chunks = 0 1","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 12\n// module chunks = 0 1","module.exports = require(\"https\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 13\n// module chunks = 0 1","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 14\n// module chunks = 0 1","import Router from 'koa-router';\nimport * as article from '../controllers/article';\n\nconst router = new Router();\n\nexport default function setupRouter (app) {\n  router.get('/api/articles', article.getList);\n  router.get('/api/article', article.find);\n  router.get('/api/tags', article.getTags);\n\n  app.use(router.routes());\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/router/router.js","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 16\n// module chunks = 0 1","import { articleModel } from '../models/index';\n\nexport async function getList(ctx, next) {\n  let { limit = Number.MAX_SAFE_INTEGER, offset = 0, tag } = ctx.query;\n  limit = parseInt(limit, 10);\n  offset = parseInt(offset, 10);\n\n  let list = articleModel.getList()\n    .sort((a, b) => { // 按照最新的放在最前面排序\n      return a.time > b.time ? -1 : 1;\n    })\n    .slice(offset, limit + offset)\n    .value();\n\n  // 有标签筛选条件\n  if (tag) {\n    list = list.filter(item => item.tags.indexOf(tag) >= 0);\n  }\n\n  ctx.status = 200;\n  ctx.body = list;\n}\n\nexport async function find(ctx, next) {\n  const article = articleModel.find({ name: ctx.query.name }).value();\n  ctx.status = 200;\n  ctx.body = article;\n}\n\nexport async function getTags (ctx, next) {\n  const articles = articleModel.getList().value();\n  const tags = articles.map(article => article.tags)\n    .reduce((result, cur) => result.concat(cur), []);\n  const tagsUniq = Array.from(new Set(tags));\n\n  ctx.status = 200;\n  ctx.body = tagsUniq;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/article.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 18\n// module chunks = 0 1","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 19\n// module chunks = 0 1","import cors from 'koa2-cors';\n\nconst whiteDomain = [\n  'coolriver.net.cn',\n  'localhost',\n  '127.0.0.1',\n];\n\nexport default function setupCors (app) {\n  app.use(cors({\n    origin: (ctx) => {\n      // return '*';\n      // console.log(ctx.hostname);\n      if (whiteDomain.indexOf(ctx.hostname) >= 0) {\n        return ctx.origin;\n      }\n\n      return false;\n    },\n  }));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/libs/cors.js","module.exports = require(\"koa2-cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa2-cors\"\n// module id = 21\n// module chunks = 0 1","module.exports = {\r\n  head: {\r\n    meta: [\r\n      { charset: 'utf-8' },\r\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\r\n      { hid: 'description', name: 'description', content: 'coolriver的个人博客站点' },\r\n      { hid: 'keywords', name: 'keywords', content: 'coolriver,前端,博客' },\r\n      { hid: 'shareimg', itemprop: 'image', content: 'https://coolriver.net.cn/avatar.jpg' },\r\n    ],\r\n    link: [\r\n      {\r\n        rel: 'icon',\r\n        type: 'image/x-icon',\r\n        href: '/favicon.ico',\r\n      },\r\n    ],\r\n    script: [\r\n      {\r\n        src: 'https://hm.baidu.com/hm.js?406ea27bfbb3000b689c8ab5f17ebb86',\r\n        async: 'async'\r\n      }\r\n    ],\r\n    title: 'coolriver的空间',\r\n  },\r\n  build: {\r\n    extend: function (config) {\r\n      const imageLoaderConf = config.module.rules.find(function (item) {\r\n        return item.test.toString().indexOf('|svg') >= 0;\r\n      });\r\n\r\n      const vueLoader = config.module.rules.find((rule) => rule.loader === 'vue-loader');\r\n      vueLoader.options.loaders.sass = 'vue-style-loader!css-loader!sass-loader';\r\n\r\n      imageLoaderConf.test = /\\.(png|jpe?g|gif)$/;\r\n\r\n      config.module.rules = config.module.rules.concat([\r\n        {\r\n          test: /\\.md$/,\r\n          loaders: ['raw-loader', 'markdown-code-highlight-loader']\r\n        },\r\n        {\r\n          test: /\\.svg$/,\r\n          loader: 'svg-url-loader',\r\n          options: {\r\n            limit: 1000\r\n          }\r\n        }\r\n      ]);\r\n    }\r\n  },\r\n  css: [\r\n    'vuetify/dist/vuetify.css',\r\n    '~assets/css/common.css',\r\n    'mdi/css/materialdesignicons.css',\r\n    'highlight.js/styles/atom-one-dark.css',\r\n    'github-markdown-css/github-markdown.css'\r\n  ],\r\n  plugins: [\r\n    '~plugins/vue-vuetify',\r\n    {\r\n      src: '~plugins/busuanzi',\r\n      ssr: false\r\n    },\r\n    {\r\n      src: '~plugins/baidutongji',\r\n      ssr: false\r\n    },\r\n    '~plugins/filter',\r\n  ],\r\n  vendor: ['axios']\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","import path from 'path';\nimport walk from 'walk';\nimport fs from 'fs';\nimport { articleModel } from './models/index';\nimport { parseTags, parseDesc, parseImage, parseTitle } from './libs/mdParser';\n\nconst mdDir = path.resolve(__dirname, '../markdown/');\n\n// articleModel.addOrUpdateArticle('test');\n\nfunction walkMd() {\n  const walker = walk.walk(mdDir, {\n\n  });\n\n  walker.on('file', function(root, fileStats, next) {\n    const { name, birthtime } = fileStats;\n    const fileNamePur = name.replace(/\\.md$/, '');\n    const filePath = path.resolve(mdDir, name);\n\n    fs.readFile(filePath, 'utf8', (err, data) => {\n      const tags = parseTags(data);\n      const desc = parseDesc(data);\n      const img = parseImage(data);\n      const title = parseTitle(data);\n\n      articleModel.insertOrUpdate({\n        title,\n        img,\n        desc,\n        tags,\n        name: fileNamePur,\n        time: birthtime,\n      });\n\n      next();\n    });\n  });\n}\n\nwalkMd();\n\nconsole.log('sync article done');\n\n\n\n// WEBPACK FOOTER //\n// ./server/syncArticleData.js","module.exports = require(\"walk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"walk\"\n// module id = 24\n// module chunks = 0 2","/**\n * 解析md文档中的tag占位符，得到文章的tags\n * @export\n * @param {String} content md内容文本\n * @returns {Array} tags列表\n */\nexport function parseTags (content) {\n  const TAG_REG = /^<!--TAG\\s*(.*)\\s*\\/TAG-->$/m;\n  const matches = content.match(TAG_REG) || [];\n  const tagsStr = matches[1];\n  let tags = tagsStr ? tagsStr.split(';') : [];\n\n  return tags.map(tag => tag.trim());\n};\n\n/**\n * 解析md文档中的描述点位符，得到文章的简介信息\n *\n * @export\n * @param {String} content md内容文本\n * @returns {String} 文章简介\n */\nexport function parseDesc (content) {\n  //const DESC_REG = /^<!--DESC\\s*(.*)\\s*\\/DESC-->$/m;\n  const DESC_REG = /^(?=[\\u4e00-\\u9fa5]|[\\w])(.*)$/m;\n  const matches = content.match(DESC_REG) || [];\n\n  return matches[1] || '暂无简介信息';\n};\n\n/**\n * 解析文档中的图片信息，得到第一张图片链接\n *\n * @export\n * @param {String} content md内容文本\n * @returns {String} 图片链接\n */\nexport function parseImage (content) {\n  const IMG_REG = /!\\[.*\\]\\(([^\\(\\)]+)\\)/;\n  const matches = content.match(IMG_REG) || [];\n\n  return matches[1] || '/image/default-article-img.jpg';\n};\n\n/**\n * 解析文档中的标题信息\n *\n * @export\n * @param {String} content md内容文本\n * @returns {String} 文章标题\n */\nexport function parseTitle (content) {\n  const TITLE_REG = /^#(.+)$/m;\n  const matches = content.match(TITLE_REG) || [];\n  const title = matches[1] && matches[1].trim() || '未知标题';\n\n  console.log('title: ' + title);\n  return title;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/libs/mdParser.js","\nconst BACKPACK_ENTRY_MAP = {\n  server: () => {\n    require('./server');\n  },\n  'sync-article': () => {\n    require('./syncArticleData');\n  }\n};\n\nconst runEntryCommand = () => {\n  console.log(process.env.BACKPACK_ENTRY);\n  const entry = process.env.BACKPACK_ENTRY;\n  const task = BACKPACK_ENTRY_MAP[entry] || BACKPACK_ENTRY_MAP['server'];\n\n  task();\n}\n\nrunEntryCommand();\n\n\n\n// WEBPACK FOOTER //\n// ./server/entry.js"],"sourceRoot":""}